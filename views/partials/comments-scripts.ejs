<script>
(function() {
  'use strict';
// get random commentator every time hit comment section
  const commentators = [
    {
      "id": 1,
      "name": "Paul Gascoine",
      "description": "I'm Gazza - and I am an alcoholic.",
      "mbti": "ENFJ",
      "enneagram": "6w3",
      "variant": "sp/so",
      "tritype": 725,
      "socionics": "SEE",
      "sloan": "RCOEN",
      "psyche": "FEVL",
      "image": "https://m.media-amazon.com/images/M/MV5BY2I4ZWI1NGQtZDM5ZS00ZjE3LTg3MzUtMTZkYjY3MDUxZWZmXkEyXkFqcGc@._V1_.jpg",
    },
    {
      "id": 2,
      "name": "Robert De Niro",
      "description": "You talkin' to me?",
      "mbti": "ISTJ",
      "enneagram": "5w3",
      "variant": "sp/so",
      "tritype": 725,
      "socionics": "SEE",
      "sloan": "RCOEN",
      "psyche": "FEVL",
      "image": "https://stellaadler.com/wp-content/uploads/2015/08/10-1-290x290.jpg",
    },
  ];

  //since it is static data, i put name and picture of commentators here
  let comments = [{
    "id": 1,
    "avatar": "https://i.pravatar.cc/150?img=3",
    "username": "Noah Jackson",
    "title": "INTP for sure!",
    "comment": "This is a sample comment. I really love this profile and think it is super accurate! came from my own experience as an INTP 5w1 Taurus. Highly recommend checking out the other profiles on this site as well!",
    "mbti": "INTP",
    "enneagram": "5_wing_9",
    "zodiac": "TAURUS",
    "love": "45",
  }];

  document.addEventListener("DOMContentLoaded", () => {
    function renderComments(commentsToRender = comments) {
        const container = document.getElementById('comments-container');

        container.innerHTML = commentsToRender.map(comment => `
            <div class="profile-card comment-box row">
                <div class="row sqs-row">
                <div class="col sqs-col-sub-trait comment-box-avatar">
                    <img class="comment-profile-picture" src="${comment.avatar}" /> 
                </div>
                <div class="col sqs-col-sub-trait comment-box-username">
                    <span>${comment.username}</span>
                </div>
                </div>
                <div class="row">
                <div class="sqs-col-12 comment-box-title">
                    <p>
                        ${comment.title}
                    </p>
                </div>
                </div>
                <div class="row sqs-row">
                <div class="col sqs-col-comment">
                    ${comment.mbti !="" ? "<div class='rounded-button'>" + comment.mbti + "</div>" : ''}
                    ${comment.enneagram !="" ? "<div class='rounded-button'>" + comment.enneagram + "</div>" : ''}
                    ${comment.zodiac !="" ? "<div class='rounded-button'>" + comment.zodiac + "</div>" : ''}
                </div>
                </div>
                <div class="row">
                <div class="comment-box-body">
                    <p>
                        ${comment.comment}
                    </p>
                </div>
                </div>
            
                <!-- LOVE/VOTE BUTTON -->
                <div class="row sqs-row">
                <div class="col sqs-col-comment">
                    <ul class="comment-loves">
                        <li class="love-button" script="loveComment();">
                        <i class="material-icons love-icon">favorite</i>
                        </li>
                        <li class="love-count">
                        <span class="vote-count">${comment.love}</span>
                        </li>
                    </ul> 
                </div>
                </div>
            </div>
        `).join('');
    }

    // Initial comments render
    renderComments();

    const dropdownButton = document.querySelector(".dropdown-toggle");
    const dropdownMenu = document.querySelector(".dropdown-menu");
    
    dropdownButton.addEventListener("click", (e) => {
        e.stopPropagation()
        dropdownMenu.classList.toggle("open");
    });

    document.addEventListener("click", (e) => {
        dropdownMenu.classList.remove("open");
    });
  });

  function loveComment(){
    let counter = getElementsByClassName('love-count').textContent;
      alert('sfsdf');
    } 

})();
</script>